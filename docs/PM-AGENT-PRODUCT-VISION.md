# PM-Agent 產品構想與架構

> 本文件描述 Intake & Analysis、QA Backlog、Architecture & Stories、PRD 四大功能與其關係，以及與既有 File Records 的差異。**僅供規劃與討論，尚未對應到現有程式碼實作。**

---

## 一、整體架構：四個 Sidebar 功能

```
Sidebar
├── Intake & Analysis     （AI 處理紀錄：逐字稿 + 分析 + 一鍵產出）
├── QA Backlog            （PM 雜事清單，可與音檔／會議關聯）
├── Architecture & Stories （專案層：架構與故事，持續演進）
└── PRD                   （版本控管，可從前三者抓資料 + AI 整理）
```

設計原則：
- **Intake & Analysis**：單次「上傳 → 轉錄 → 分析」的產出與後續動作。
- **QA Backlog**：來自日常與會議的零散事項，帶狀態、可追溯來源。
- **Architecture & Stories**：專案級真相來源，由會議與 QA 沉澱而來。
- **PRD**：對上三者做「選取 + 組裝 + AI 整理」，並做版本管理。

---

## 二、Intake & Analysis（AI 處理紀錄）

### 2.1 定位

- **是什麼**：所有「上傳音檔 → 語音轉文字（Whisper）→ Claude 整理／分析」的**處理紀錄列表**。
- **主要用途**：  
  - 一眼看到每一筆 AI 處理的紀錄。  
  - 點進去可看**逐字稿**與**AI 分析結果**（摘要、決策、風險、logic flags 等）。  
  - 可對單筆紀錄做後續動作（例如一鍵產出會議記錄或備忘錄）。

### 2.2 與 File Records 的差異

| 維度 | File Records | Intake & Analysis |
|------|--------------|--------------------|
| **範圍** | 所有上傳檔案（音檔、文件、圖片等）的「檔案清單」 | 僅「走過轉錄 + AI 分析」的音檔紀錄 |
| **重點** | 檔案本身：下載、預覽、刪除、儲存位置 | 處理產物：逐字稿、分析結果、後續產出（會議記錄／備忘錄） |
| **列表內容** | 檔名、大小、類型、上傳時間等 | 標題（可取自檔名或 AI 摘要）、處理時間、來源檔、逐字稿預覽、分析摘要 |
| **典型操作** | 下載、重新上傳、管理儲存 | 檢視逐字稿／分析、一鍵生成會議記錄／備忘錄、加入 QA Backlog、關聯到 Architecture |

**建議**：  
- File Records 維持「全檔案庫」角色。  
- Intake & Analysis 視為「AI 處理流水線的結果庫」，每一筆對應一筆「處理紀錄」（可關聯到 File 的某個音檔，但以「紀錄」為主體）。  
- 若同一音檔重新分析，可視需求保留為新一筆 Intake 紀錄或覆寫，不影響 File Records 仍保留原始檔。

### 2.3 功能要點

- **列表**：標題、時間、來源檔名、分析摘要一句、狀態（成功／部分失敗／失敗）。
- **詳情面板**：  
  - 逐字稿（可複製、可搜尋）。  
  - AI 分析結果（摘要、關鍵決策、風險、依賴、logic flags 等）。
- **後續動作**：  
  - **一鍵製作會議記錄／備忘錄**：可開一個「會議記錄＆備忘錄」功能，從 Intake 某筆一鍵生成一篇，再可編輯、存成版本或掛到專案。  
  - **加入 QA Backlog**：見下節。  
  - **匯出／分享**（可後續再細化）。

### 2.4 會議記錄＆備忘錄（子功能構想）

- **會議記錄**：較正式、結構化（與會人、結論、待辦、下次會議等），可帶模板。  
- **備忘錄**：較輕量、自由格式，方便快速記重點。  
- 可從 Intake 某筆「一鍵生成」初稿（以逐字稿 + AI 分析為依據），再在專用編輯器裡修改、存檔；之後可考慮與 QA Backlog 或 PRD 做關聯（例如「此會議記錄對應的 QA 項目」）。

---

## 三、QA Backlog（PM 雜事清單）

### 3.1 定位

- **對象**：PM 日常與會議產出的雜項，與「開發者 backlog」分開。  
- **內容類型**：需求確認、合約、發想、請款、下次要討論的、跟進事項、外部協作待辦等。  
- **形式**：清單 + **狀態**（待處理、進行中、已結案、擱置等），可再細分類型／標籤。

### 3.2 與 Intake & Analysis 的關係

- 在 Intake 某筆紀錄上可操作：「**加入 QA Backlog**」。  
  - 可帶入該筆的摘要或選取段落，成為 QA 項目的描述或附註。  
  - 建立後即建立**雙向關聯**：  
    - 從 Intake 看「由此產出的 QA 項目」；  
    - 從 QA Backlog 看「來源音檔／會議紀錄」與連結回 Intake。  
- 之後在會議或討論中若提到某個 QA 項目，可在 Intake 或會議記錄裡標註「對應 QA #xxx」，強化追溯。

### 3.3 功能要點

- 列表：標題、類型／標籤、狀態、建立時間、來源（若來自 Intake 則顯示連結）。  
- 篩選：依狀態、類型、是否有音檔來源。  
- 詳情：描述、附註、**關聯的 Intake 紀錄**（可點進去看逐字稿與分析）。  
- 狀態流轉與簡易歷史（可後續再加）。

---

## 四、Architecture & Stories（專案層）

### 4.1 定位

- **層級**：專案級，放在最外層 Sidebar，代表「這個專案」的架構與故事。  
- **角色**：專案演進中的**單一真相來源**（single source of truth）之一，持續更新。  
- **更新來源**：  
  - PM 手動新增／編輯。  
  - **會議音檔**：從 Intake 分析結果萃取出的架構調整、新故事、優化建議，可手動或半自動寫入。  
  - **QA 處理後**：需求確認、發想、待討論等沉澱成架構或故事。  
- 設計上可區分「架構」區塊（技術／模組／介面）與「Stories」區塊（功能／使用者故事），或同一頁分區呈現。

### 4.2 與 Intake、QA 的關係

- Intake 分析完成後，可提供動作：「**建議寫入 Architecture & Stories**」或「加入為新 Story」，由 PM 勾選／編輯後寫入。  
- QA Backlog 結案或標記為「已收斂」時，可選擇「同步到 Architecture & Stories」或建立對應 Story。  
- 在 Architecture & Stories 的某段內容可標註「來自會議 xxx」或「來自 QA #xxx」，方便追溯。

---

## 五、PRD（產品需求文件）

### 5.1 定位

- **獨立功能**：自己的 Sidebar 項目，有**版本控管**（可存多版、比對、回滾）。  
- **內容來源**：  
  - 手動編輯。  
  - **從上面三者抓取**：可選擇要納入的「參考依據」——例如某幾筆 Intake 的摘要、某幾條 QA、Architecture & Stories 的某些段落。  
- **理想流程**：選好參考 → **AI 協助整理**（大綱、章節、敘述一致化）→ 產出 PRD 草稿 → 再手動微調、存版。

### 5.2 「拼拼湊湊」的 UI 構想

- **選料區**：  
  - 從 Intake、QA Backlog、Architecture & Stories 以清單／卡片形式勾選「要放進這版 PRD 的素材」（段落、摘要、連結）。  
  - 可預覽選取內容、調整順序或分組（例如：需求來源、功能描述、非功能需求）。  
- **組裝區**：  
  - 顯示目前 PRD 草稿（可由 AI 依選料生成），章節可拖曳、摺疊、編輯。  
  - 每個區塊可標註「來自哪個來源」（Intake / QA #id / Architecture 某段），方便追溯與更新。  
- **版本區**：  
  - 存版、版本列表、版本差異（diff）、可選某版為「當前對外」或還原。

### 5.3 與前三者的資料流

```
Intake & Analysis  ──┐
                     ├──► 使用者勾選 ──► AI 整理 ──► PRD 草稿 ──► 版本儲存
QA Backlog         ──┤
                     │
Architecture & Stories ─┘
```

---

## 六、優化與延伸靈感

1. **統一「來源」標註**  
   各處（Intake、QA、Architecture、PRD、會議記錄）都能標註「來自哪個會議／哪筆 QA／哪段架構」，方便後續搜尋與報告。

2. **全域搜尋**  
   關鍵字可搜 Intake 逐字稿、分析、QA 標題與描述、Architecture、PRD、會議記錄，結果可依類型篩選並直接跳轉。

3. **時間軸／專案動態**  
   以時間軸呈現「某專案」的動態：某日上傳音檔、某日新增 QA、某日更新 Architecture、某日發布 PRD 新版本，方便回顧與覆盤。

4. **會議記錄模板**  
   提供幾種會議類型模板（例：需求討論、合約確認、衝刺回顧），從 Intake 一鍵生成時可選模板，AI 依模板產出結構化初稿。

5. **PRD 與 Story 對齊**  
   PRD 章節或需求條目可與 Architecture & Stories 的某條 Story 建立連結，雙向檢視「PRD 寫了什麼」與「Story 進度」。

6. **權限與可見範圍**  
   若未來有多專案／多空間：Intake、QA、Architecture、PRD 皆可依專案或空間做篩選與權限控制，與現有 Space/Project 模型對齊。

7. **AI 建議**  
   - 在 Intake 分析完成後，AI 建議「可加入的 QA 項目」或「可寫入 Architecture 的要點」。  
   - 在 PRD 選料完成後，AI 建議章節結構或遺漏的參考來源。

---

## 七、小結

| 功能 | 核心 | 與他者關係 |
|------|------|------------|
| **Intake & Analysis** | 單次 AI 處理的紀錄；逐字稿 + 分析；一鍵會議記錄／備忘錄 | 可加入 QA、可貢獻 Architecture、可當 PRD 素材 |
| **QA Backlog** | PM 雜事清單＋狀態；可追溯來源 | 來自 Intake；可沉澱到 Architecture |
| **Architecture & Stories** | 專案級架構與故事，持續演進 | 來源：手動、Intake、QA；可當 PRD 素材 |
| **PRD** | 版本控管的需求文件 | 從前三者選料 + AI 整理產出 |
| **File Records** | 全檔案庫（含未經 AI 處理的檔案） | 提供「原始檔」；Intake 紀錄可關聯到某個 File |

此架構讓「音檔 → 轉錄 → 分析」的產出有明確落點（Intake），並透過 QA Backlog 與 Architecture & Stories 沉澱，最後在 PRD 中做選取與 AI 整理，形成從會議到正式文件的完整鏈路。後續可依此 .md 再拆成實作規格與 API/資料模型，而不改動現有程式碼。
